<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bangorinas | AI</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
  
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script type="module" src="./index.js"></script>

  <title>Bangorinas | AI</title>
  <link rel="icon" type="image/png" href="./assets/aibang.png"/>
  <meta name="description" content="Bangorinas AI offers an innovation of AI product that focusing on high-quality models" />
  <meta name="keywords" content="Bangorinas, AI, Artifical Intelligence, A1 Power, Verve, Verve Pro, Effort 1, Online Chatbot, Offline AI Assistant, Free to use AI, Open-Source,  Rangga Hermawan, Rangga Fermata" />
  <meta name="author" content="Rangga Hermawan" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js" defer></script>


  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <script src="./api-config.js"></script>
  <script>

  // Firebase initialization - fetch config from backend
  async function initializeFirebase() {
    try {
      const response = await fetch(`${window.API_URL}/api/config`);
      const firebaseConfig = await response.json();
      
      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();
      const db = firebase.firestore();
    } catch (error) {
      console.error('Failed to load Firebase config:', error);
    }
  }
  
  // Initialize Firebase on page load
  initializeFirebase();

  </script>
  <script src="./config.js"></script>
  <script type="module" src="./index.js"></script>

  <script>
  (async () => {
    try {
      const res = await fetch('/api/env');
      const data = await res.json();
      window.API_URL = data.apiUrl || window.location.origin;
      console.log('API_URL:', window.API_URL);
    } catch (e) {
      console.error('Failed to load API URL', e);
    }
  })();
  </script>


  <style>
    @font-face {
      font-family: 'Noto Sans'; /* Give your font a name */
      src: url('./assets/NotoSans_SemiCondensed-Light.ttf') format('ttf'); /* Path to your font file */
    }
    main {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex-grow: 1;
      position: relative;
      overflow: hidden;
    }
    #response-box {
      position: absolute;
      transform: translateY(-25px);
      overflow-y: auto;
      display: none;
      flex-direction: column;
      padding: 1rem; 
      overflow-y: auto;
      padding-bottom: 150px;
      transition: opacity 0.4s ease;
    }
    #hello-text {
      font-family: 'Noto Sans', sans-serif; /* Use your custom font! */
      font-size: 2rem; /* Adjust size as needed */
      font-weight: lighter;
      position: absolute;
      transform: translateY(-40px);
      overflow: hidden; /* Ensures the text is not visible until the animation reveals it */
      border-right: .15em solid rgb(83, 83, 83); /* This is the typewriter cursor */
      white-space: nowrap; /* Keeps the text on a single line */
      margin: 0 auto; /* Centers the element */
      max-width: 200px;
      letter-spacing: .10em; /* Adjust as needed */
      animation:
        typing 2.5s steps(6, end), /* The typing animation */
        blink-caret .75s step-end infinite; /* The blinking cursor animation */
      
    }

    /* The typing effect */
    @keyframes typing {
      from { width: 0 }
      to { width: 100% }
    }

    /* The typewriter cursor blinking effect */
    @keyframes blink-caret {
      from, to { border-color: transparent }
      50% { border-color: rgb(95, 95, 95); }
    }

    #hello-image {
      display: none;
    }

    body {
      background: linear-gradient(180deg, #161616 15%, #272727 85%);
      background-size: cover;
      background-position: center;
      color: white;
    }
    #chat-form {
      position: relative;
      z-index: 10;
      flex-shrink: 0;
      transform: translateY(80px);
      transition: transform 0.5s ease-in-out;
      padding: 1rem 1.5rem 1.5rem 1.5rem;
      width: 100%;
      max-width: 880px;
    }
    /* This class will be added by JavaScript */
    main.chat-active #hello-text {
      opacity: 0;
      display: none;
    }

    main.chat-active #response-box {
      display: flex; /* Show the response box */
    }

    main.chat-active #chat-form {
      /* Animate the form to the bottom of the screen */
      transform: translateY(330px);
    }
    #chat-form.active {
      translate: translateY(100px);
    }
    .chat-input-group {
      background: linear-gradient(to bottom, rgba(97, 97, 97, 0.9), rgba(66, 66, 66, 0.9));
      border-radius: 1rem;
      padding: 0.5rem 1rem;
      box-shadow:  #18181833 0px 0px 5px, 0 0 10px #19191a33, 0 0 15px #19191a33, 0 0 20px #16161633
    }
    #chat-input {
      background: transparent;
      border: none;
      color: white;
      resize: none;
      overflow-wrap: break-word;
      word-break: break-word;
      white-space: pre-wrap;
      max-height: 120px; /* Set a maximum height before scrolling starts */
      overflow-y: auto;  /* Show scrollbar only when needed */
    }
    #chat-input:focus {
      outline: none;
      box-shadow: none;
    }
    .chat-bubble {
      max-width: 90%;
      padding: 0.75rem 1rem;
      margin-bottom: 0.5rem;
      border-radius: 1rem;
      animation: fadeInUp 0.3s ease-out;
      word-wrap: break-word;
      overflow-wrap: break-word;
      white-space: pre-wrap;
    }
    .chat-bubble.user {
      background-color: #444;
      align-self: flex-end;
    }
    .chat-bubble.bot {
      align-self: flex-start;
    }

    /* --- Code Block and Copy Button Styles --- */
    .code-block-wrapper {
      background-color: #1e1e1e; /* A slightly different dark shade */
      border-radius: 0.75rem;
      margin: 0.5rem 0;
      border: 1px solid #444;
    }

    /* We style the <pre> tag that Prism uses */
    pre[class*="language-"] {
      background: transparent !important; /* Override Prism's default background */
      padding: 1rem;
      margin: 0 !important; /* Override Prism's default margin */
      border-radius: 0 0 0.75rem 0.75rem;
      font-size: 0.9em;
    }

    /* This is the header for the code block */
    .code-block-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #333;
      padding: 0.5rem 1rem;
      border-radius: 0.75rem 0.75rem 0 0;
      color: #ccc;
      font-size: 0.8em;
      text-transform: uppercase;
    }

    .copy-code-btn {
      background-color: #444;
      color: #fff;
      border: none;
      padding: 0.25rem 0.5rem;
      border-radius: 0.25rem;
      cursor: pointer;
      font-size: 0.9em;
      transition: background-color 0.2s;
    }

    .copy-code-btn:hover {
      background-color: #555;
    }
    
    .text-muted, .form-control::placeholder {
      color: #cccccc !important;
    }
    .btn-outline-light:focus, .btn-outline-light:active {
      box-shadow: none !important;
    }
    .dropdown-menu {
      min-width: 200px;
      animation: fadeInDown 0.3s ease-in-out;
    }
    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    #chat-history {
      overflow-y: auto;
      max-height: 700px;
      height: 100%;
      padding: 0 10px;
      padding-right: 10px;
    }
    #chat-history li {
      padding: 12px 10px;
      margin-bottom: 10px;
      border-radius: 10px;
      border: 1px solid transparent; /* Prevents layout shift on hover */
      transition: background-color 0.2s ease, transform 0.2s ease;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: space-between; /* Pushes icons to the right */
    }
    #chat-history li:nth-child(even) {
      background-color: #1c1c1c9f; /* Lighter background for even items */
      opacity: 0.8;
    }
    #chat-history li:nth-child(odd) {
      background-color: #2c2c2c80; /* Darker background for odd items */
      opacity: 0.8;
    }
    #chat-history li:hover .history-item-actions {
      display: flex;
    }
    #chat-history li:hover {
      background-color: #3a3a3a; /* Darker background on hover */
      transform: scale(1.02); /* Slightly enlarge the item on hover */
    }
    #chat-history li:active {
      background-color: #4a4a4a;
      transform: scale(0.98); /* Makes the item shrink slightly on click */
    }

    .history-item-actions {
      display: none; /* Hidden by default */
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(50%);
      gap: 5px;
    }

    .history-item-actions button {
      background: transparent;
      border: none;
      color: inherit;
      padding: 6px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 34px;
      height: 28px;
      border-radius: 6px;
    }
    .history-item-actions button:focus {
      outline: 2px solid rgba(255,255,255,0.12);
    }

     .history-item-actions .editBtn,
     .history-item-actions .deleteBtn {
       cursor: pointer;
       opacity: 0.7;
       transition: opacity 0.2s;
     }
 
     .history-item-actions .editBtn:hover,
     .history-item-actions .deleteBtn:hover {
       opacity: 1;
     }
 
    .editBtn {
      display: flex;
      align-items: center;
      background-image: url('./assets/edit.png');
      background-size: 16px 16px;
      background-repeat: no-repeat;
      background-position: center;
      padding-left: 20px;
      gap: 5px;
    }

    .deleteBtn {
      display: flex;
      align-items: center;
      background-image: url('./assets/delete.png');
      background-size: 16px 16px;
      background-repeat: no-repeat;
      background-position: center;
      padding-left: 20px;
      gap: 5px;
    }
    

    
    /* Style for the text part of the list item */
    .history-item-title {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      padding-right: 60px; /* Make space for the icons */
      width: 100%;
    }

    #sidebar {
      position: fixed;
      top: 0; /* Align to the very top */
      left: 0;
      height: 100%; /* Make it full viewport height */
      width: 250px;
      background-color: linear-gradient(to bottom, #575555 90%, #333232 10%);
      border-right: 4px solid #68666634;
      padding: 1rem;
      z-index: 1050;
      display: flex; /* Make it a flex container by default */
      flex-direction: column;
      transform: translateX(-100%); /* Start off-screen */
      transition: transform 0.3s ease-in-out; /* Animate both properties */
    }
    #sidebarFooter {
      margin-top: auto; /* Pushes the footer to the bottom */
      max-height: 100px; /* Limit the height of the footer */
      padding: 1rem;
    }
    #sidebarHandle {
      position: absolute;
      top: 0;
      left: 100%;
      width: 72px;
      height: 100%;
      background-color: rgba(19, 19, 19, 0);
    }
    #sidebar.active {
      transform: translateX(0); /* Slide into view */
    }
    #sidebarToggle {
      position: absolute;
      top: 15px;
      right: -50px;
      width: 25px; 
      height: 25px;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      justify-content: space-around;
      transition: right 0.4s ease-in-out;
    }
    #sidebarToggle div {
      width: 100%;
      height: 3px;
      background-color: rgb(165, 163, 163);
      border-radius: 2px;
      transition: all 0.4s ease;
    }
    #sidebar.active #sidebarToggle .bar1 {
      transform: rotate(-45deg) translate(-5px, 6px);
    }
    #sidebar.active #sidebarToggle .bar2 {
      opacity: 0;
    }
    #sidebar.active #sidebarToggle .bar3 {
      transform: rotate(45deg) translate(-5px, -5px);
    }
    /* When sidebar is active, move the toggle button to a nice spot inside */
    #sidebar.active #sidebarToggle {
      right: 20px;
    }
    #logo{
      position: absolute;
      width: -5px; 
      right: -290px;
      height: 0px;
      display: flex;
      flex-direction: column;
      justify-content: space-around;
      transition: right 0.4s ease-in-out;
    }

    #modelDropdown{
      position: relative;
      display: inline-block;
      cursor: pointer;
      color: #fff;
      font-weight: 600;
      padding: 0.5rem 1rem;
      background-color: rgba(105, 105, 105, 0.226);
      border-radius: 0.5rem;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    #modelDropdown:hover {
      background-color: rgba(165, 163, 163, 0.3);
    }
    #modelDropdown .dropdown-menu {
      background-color: #333;
      border: none;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    #modelDropdown .dropdown-item {
      color: #fff;
    }

    #modelDropdown .dropdown-item:hover {
      background-color: #575757;
    }

    #logo div {
      width: 100%;
      height: 0px;
      background-color: white;
      border-radius: 6px;
      transition: all 0.4s ease;
    }
    #sidebar.active #logo {
      right: -240px;
    }
    #authNotice {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(0,0,0,0.85);
      border: 1px solid #ccc;
      padding: 1rem 1.5rem;
      border-radius: 0.5rem;
      color: white;
      z-index: 2000;
      display: none;
    }
    .typing-dots {
      display: inline-block;
      font-size: 1.2rem;
      letter-spacing: 2px;
      animation: blink 1s infinite;
    }
    @keyframes blink {
      0% { opacity: 0.2; }
      20% { opacity: 1; }
      100% { opacity: 0.2; }
    }
    .btn-outline-light:hover img {
      transform: scale(1.2);
      transition: transform 0.3s ease;
      filter: brightness(1.4);
    }
    /* --- Custom Dark Scrollbar Styles --- */
  /* Works on Firefox */
  * {
    scrollbar-width: thin;
    scrollbar-color: #555 #2c2c2c;
    }

    /* Works on Chrome, Edge, and Safari */
    *::-webkit-scrollbar {
      width: 12px;
    }

    *::-webkit-scrollbar-track {
      background: #2c2c2c;
    }

    *::-webkit-scrollbar-thumb {
      background-color: #555;
      border-radius: 20px;
      border: 3px solid #2c2c2c;
    }

    *::-webkit-scrollbar-thumb:hover {
      background-color: #777;
    }
    #response-box::-webkit-scrollbar {
      display: none;
    }

    /* For Firefox */
    #response-box {
      scrollbar-width: none;
    }
    #chat-input::-webkit-scrollbar {
      display: none;
    }
    #chat-input {
      scrollbar-width: none;
    }
    
    #media-preview-container {
      position: relative;
      padding: 0.5rem;
    }
    #media-items {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    .media-item {
      position: relative;
      width: 120px;
      height: 120px;
      border-radius: 0.75rem;
      border: 2px solid #555;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #2c2c2c;
    }
    .media-item img,
    .media-item video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .media-item .file-badge {
      position: absolute;
      bottom: 0;
      right: 0;
      background-color: rgba(0,0,0,0.8);
      color: #fff;
      font-size: 0.7rem;
      padding: 2px 4px;
      border-radius: 2px;
    }
    .remove-media-btn {
      position: absolute;
      top: -10px;
      right: -10px;
      background-color: rgba(0,0,0,0.8);
      color: white;
      border: 2px solid #fff;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      cursor: pointer;
      font-size: 16px;
      line-height: 1;
      text-align: center;
      padding: 0;
      transition: background-color 0.2s;
    }
    .remove-media-btn:hover {
      background-color: rgba(255,0,0,0.9);
    }
    main.chat-active #media-preview-container {
      transform: translateY(0);
    }
    /* Welcome splash styles */
    #welcome-splash-overlay {
      position: fixed;
      inset: 0;
      display: none;
      animation: fadeIn .4s ease-out;
      align-items: center;
      justify-content: center;
      z-index: 4000;
      background: linear-gradient(to bottom, rgba(22, 22, 22, 0.986), rgba(21, 22, 22, 0.76));
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(6px);
      padding: 1rem;
    }

    #welcome-logo {
      position: absolute;
      align-items: center;
      top: 140px;
      z-index: 1000;
    }

    #welcome-splash {
      /* background: linear-gradient(180deg, #14141405 10%, #29282815 90%); */
      color: #fff;
      border-radius: 12px;
      padding: 22px;
      max-width: 800px;
      width: 100%;
      /* box-shadow: 0 10px 30px rgba(0, 0, 0, 0.74); */
      text-align: left;
      transform: translateY(0);
    }

    #micro-screen {
      animation: fadeIn .25s ease-out;
    }
    #paper-screen {
      animation: fadeIn .25s ease-out;
    }

    #welcome-splash h2 {
      margin: 0 0 8px 0;
      font-weight: 600;
    }

    #welcome-splash p {
      margin: 0 0 16px 0;
      color: #cfcfcf;
      line-height: 1.45;
    }

    #welcome-splash .actions {
      display: flex;
      gap: 8px;
      justify-content: flex-end;
    }
    #welcome-splash .actions button {
      flex: 1;
      min-width: 120px;
      height: 560px;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(6px); }
      to { opacity: 1; transform: translateY(0); }
    }
    #btn-bangorinas,
    #btn-micro,
    #btn-paper {
      transform: scale(0.8);
      transition: transform 0.2s ease;
      border: none;
    }
    #btn-bangorinas:hover,
    #btn-micro:hover,
    #btn-paper:hover {
      transform: scale(0.9);
      background-color: #41424221;
      outline: none;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      filter: brightness(1.3);
    }

    #btn-bangorinas:active,
    #btn-micro:active,
    #btn-paper:active {
      transform: scale(0.8);
    }

    #side-info {
      position: absolute;
      top: -100px;
      left: -530px;
      height: 100%; /* Make it full viewport height */
      width: 310px;
      padding: 1rem;
      z-index: 1050;
      opacity: 0;
      cursor: pointer;
      display: flex; /* Make it a flex container by default */
      flex-direction: column;
    }

    #side-info:hover {
      transition-delay: 1s;
        animation: leftIn .25s ease-out; 
        opacity: 1;
    }


    #side-info-header {
      margin-bottom: 1rem;
    }


    #side-info-footer {
      margin-top: auto;
      display: flex;
      flex-direction: row-reverse;
      bottom: -120px;
      justify-content: center;
      align-items: center;
    }

    #main-menu {
      padding: 0.5rem 1rem;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    #main-menu:hover {
      background-color: #333;
    }

    

      @keyframes playIn {
        from { opacity: 0; transform: translateX(-7px); }
        to { opacity: 1; transform: translateX(0); }
      }
      

      @keyframes leftIn {
        from { opacity: 0; transform: translateX(6px); }
        to { opacity: 1; transform: translateX(0); }
      }

  
   #info-splash {
     width: min(880px, 95%);
     background: linear-gradient(180deg, rgba(35,35,35,0.98), rgba(25,25,25,0.98));
     border-radius: 12px;
     padding: 1.25rem;
     color: #eee;
     box-shadow: 0 0px 30px rgba(94, 189, 190, 0.473);
     max-height: 85vh;
     overflow: auto;
     text-align: left;
   }
   #info-splash h2 {
     margin-top: 0;
     margin-bottom: 0.5rem;
   }
   #info-splash .meta {
     color: #bdbdbd;
     font-size: 0.9rem;
     margin-bottom: 1rem;
   }
   #info-splash .actions {
     display: flex;
     gap: 0.5rem;
     margin-top: 1rem;
     justify-content: flex-end;
   }
   .info-close-btn {
     background: transparent;
     border: 1px solid rgba(255,255,255,0.06);
     color: #fff;
     padding: 0.4rem 0.8rem;
     border-radius: 6px;
     cursor: pointer;
   }
   .info-primary-btn {
     background: #2d7cff;
     border: none;
     color: #fff;
     padding: 0.45rem 0.9rem;
     border-radius: 6px;
     cursor: pointer;
   }
   #AI-online,
   #AI-offline {
     transform: scale(0.9);
      border: none;
      animation: neon-light 2s ease-in-out infinite alternate;
   }
   #AI-online:hover,
   #AI-offline:hover {
      transform: scale(1.0);
      transition: transform 0.2s ease;
      outline: none;
      animation: neon-light-hover 2s ease-in-out infinite alternate;
   }
   #AI-online:active,
   #AI-offline:active {
      transform: scale(0.8);
   }
   @keyframes neon-light
      {
        0% {
          box-shadow:  #61cfe233 0px 0px 5px, 0 0 10px #61cfe233, 0 0 15px #61cfe233, 0 0 20px #61cfe233;
        }
        10% {
          box-shadow: 0 0 10px #61cfe233, 0 0 15px #61cfe233, 0 0 20px #61cfe233, 0 0 25px #61cfe233;
        }
      }

      @keyframes neon-light-hover
      {
        0% {
          box-shadow:  #e261c633 0px 0px 5px, 0 0 10px #e261c633, 0 0 15px #e261a133, 0 0 20px #e261bb33;
        }
        10% {
          box-shadow: 0 0 10px #e261b733, 0 0 15px #e261c233, 0 0 20px #e261b733, 0 0 25px #e261b733;
        }
      }
      #menu-splash-overlay, #effortconfirm-splash-overlay {
        position: fixed;
        inset: 0;
        display: none;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.25s ease, visibility 0.25s ease;
        align-items: center;
        justify-content: center;
        z-index: 4000;
        background: rgba(10,10,10,0.7);
        backdrop-filter: blur(7px);
        -webkit-backdrop-filter: blur(7px);
        padding: 1rem;
      }
      #menu-splash, #effortConfirmation {
        width: min(800px, 95%);
        background: linear-gradient(to right, rgba(21, 64, 82, 0.945), rgba(34, 32, 32, 0.76));
        border-radius: 12px;
        padding: 1.25rem;
        color: #eee;
        box-shadow: 0 0px 30px rgba(0, 18, 24, 0.473);
        max-height: 92vh;
        overflow: auto;
        text-align: left;
      }
      #menu-splash h2, #effortConfirmation h2 {
        margin-top: 0;
        margin-bottom: 0.5rem;
      }
      #menu-splash .meta, #effortConfirmation .meta {
        color: #bdbdbd;
        font-size: 0.9rem;
        margin-bottom: 1rem;
      }
      #menu-splash .actions, #effortConfirmation .actions {
        display: flex;
        gap: 0.5rem;
        margin-top: 1rem;
        justify-content: flex-end;
      }
      .menu-close-btn, .cancel-effort {
        background: transparent;
        border: 1px solid rgba(255,255,255,0.06);
        color: #fff;
        padding: 0.4rem 0.8rem;
        border-radius: 6px;
        cursor: pointer;
      }
      .menu-primary-btn {
        background: #2d7cff;
        border: none;
        color: #fff;
        padding: 0.45rem 0.9rem;
        border-radius: 6px;
        cursor: pointer;
      }
      #more-btn, #send-btn, #mic-btn, #file-btn {
        opacity: 50%;
      }

      #more-btn:hover, #send-btn:hover, #mic-btn:hover, #file-btn:hover {
        opacity: 100%;
      }


</style>

</head>
<body class="d-flex flex-column min-vh-100">
  


  <div id="welcome-splash-overlay" role="dialog" aria-modal="true" aria-label="Front door to Bangorinas" style="justify-content: space-evenly; overflow-x: auto;">

      <img id="AI-online" src="/assets/OnlineChat.png" class="img-fluid mb-3 d-block" style="max-width: 500px; height: auto" role="button">
      <img id="AI-offline" src="/assets/OfflineChat.png" class="img-fluid mb-3 d-block" style="max-width: 500px; height: auto" role="button">
  

    </div>
    

  

  <!-- Sidebar -->
  <div id="sidebar">
    <div id="sidebarToggle">
      <div class="bar1"></div>
      <div class="bar2"></div>
      <div class="bar3"></div>  
    </div>
    <h5 class="text-light">Recent</h5>
    <ul class="list-unstyled text-light small" id="chat-history">
      <li>No history yet</li>
    </ul>
    <div id="sidebarFooter" class="d-flex justify-content-between align-items-center">
      <div id="main-menu" class="text-light medium bold" role="button">Main menu</div>

    </div>
    <div id="sidebarHandle" class="d-flex justify-content-center align-items-center"></div>
    

  </div>

  <!-- Auth Notice -->
  <div id="authNotice">
    <span>Sign in to save your chat history and access personalized features.</span>
    <button onclick="this.parentElement.style.display='none'" class="btn btn-sm btn-outline-light ms-3">Close</button>
  </div>

  
  <!-- Header -->
  <nav class="navbar px-4 py-2 d-flex justify-content-end align-items-center gap-3">
    <div class="dropdown">
      <span id="modelDropdown" class="text-light fw-semibold text-opacity-75 me-4 ms-2" role="button" data-bs-toggle="dropdown" aria-expanded="false">Models</span><span id="currentModelBadge" class="small text-muted ms-2 me-4">A1 Power</span>
      <ul class="dropdown-menu dropdown-menu-end bg-dark text-light">
        <li><button  class="dropdown-item text-light bg-dark" title="A1 Power - Standard, friendly AI" onclick="effort()">A1 Power</button></li>
        <li><button class="dropdown-item text-light bg-dark" title="Verve - Energetic, ambitious AI" onclick="endeavor()">Verve</button></li>
        <li><button class="dropdown-item text-light bg-dark" title="Verve Pro - Premium reasoning AI with advanced capabilities" onclick="pro()">Verve Pro (Free with Ads)</button></li>
      </ul>
    </div>
    <div class="dropdown">
      <img src="./assets/icons8-language-32.png" height="28" class="dropdown-toggle me-2" role="button" data-bs-toggle="dropdown" aria-expanded="false">
      <ul class="dropdown-menu dropdown-menu-end bg-dark text-light">
        <li><button class="dropdown-item text-light bg-dark" onclick="changeLanguage('en')">English</button></li>
        <li><button class="dropdown-item text-light bg-dark" onclick="changeLanguage('id')">Indonesia</button></li>
        <li><button class="dropdown-item text-light bg-dark" onclick="changeLanguage('fr')">Français</button></li>
        <li><button class="dropdown-item text-light bg-dark" onclick="changeLanguage('es')">Español</button></li>
        <li><button class="dropdown-item text-light bg-dark" onclick="changeLanguage('ru')">Русский</button></li>
        <li><button class="dropdown-item text-light bg-dark" onclick="changeLanguage('uk')">українська</button></li>
      </ul>
    </div>
    <div class="dropdown">
      <img id="userIcon" src="./assets/icons8-user-32__1_.png" height="32" class="rounded-circle dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
<ul class="dropdown-menu dropdown-menu-end bg-dark text-light" id="userDropdown">
        <li id="userInfo" class="dropdown-item text-light bg-dark d-none"></li>
        <li id="signinOption"><button class="dropdown-item text-light bg-dark" onclick="signIn()">Sign in with Google</button></li>
        <li id="signoutOption" class="d-none"><button class="dropdown-item text-light bg-dark" onclick="signOut()">Sign out</button></li>
      </ul>
    </div>
    <img id="ailogo" src="./assets/aibang.png" class="ms-3" alt="play" role="button">
  </nav>

  <!-- Main Content -->
  <main class="flex-grow-1 text-center">
    <h1 id="hello-text" class="my-4">Hello!</h1>
    <div id="response-box" class="mt-2 w-100 text-start rounded" style="min-height: 200px; max-height: 700px; max-width: 850px;"></div>
    

    <form id="chat-form" class="w-100 mt-4">
      <div class="input-group chat-input-group">
        <div id="media-preview-container" class="mb-2" style="display: none; transform: translateY(5px); transition: transform 0.5s ease-in-out; max-height: 200px; overflow-y: auto;">
          <div id="media-items" class="d-flex flex-wrap gap-2"></div>
        </div>
      <div class="d-flex justify-content-center">
        <button class="btn  border-0" type="button" id="file-btn" title="Attach images/videos">
          <img src="./assets/icons8-clip-32.png" height="20" alt="Attach File Icon">
        </button>
         <input type="file" id="file-input" style="display:none" accept="image/*,video/*" multiple>
      </div>
  <textarea id="chat-input" class="form-control" placeholder="Ask anything..." rows="1"></textarea>
  <div class="d-flex justify-content-center">
          <button class="btn  border-0" type="button" id="mic-btn" title="Voice input">
          <img src="./assets/icons8-mic-32.png" height="20">
        </button>
      </div>
  <button class="btn  rounded border-0" id="send-btn" type="submit" title="Send message">
    <img src="./assets/icons8-sent-32.png" height="20" alt="Send Icon">
  </button>
  <button class="btn  rounded border-0" id="stop-btn" type="button" style="display: none;">
    <img src="./assets/stop.png" height="20" alt="Stop Icon">
  </button>
</div>
        
    
</form>
  </main>

  <div id="menu-splash-overlay" role="dialog" aria-modal="true" aria-hidden="true">
    <div id="menu-splash" role="document" aria-label="Bangorinas information">
      <img src="./assets/aibang.png" alt="Effort Logo" class="img-fluid mb-3">
      <div class="meta">Bangorinas | AI</div>
      <p>
         An Artificial Intelligence division of Bangorinas, aiming to create innovative AI solutions. Its mission is to integrate technology, assistance, and privacy to deliver high-quality information and services to users worldwide.
      </p>
       <p class="meta" style="margin-top: 1.5rem;">
        © <span id="year"></span> <a href="https://bangorinas.com" target="_blank" class="text-light">Bangorinas </a> | AI 
      </p>
      <div class="actions">
        <button class="menu-close-btn" id="menu-splash-close">Close</button>
      </div>
    
    </div>

    
    </div>
 

  <footer class="text-center py-3 small  text-muted " style="position: absolute; bottom: 0; width: 100%;">
        © <span id="year" ></span> Bangorinas | AI — Part of <a href="https://bangorinas.com/" class="text-muted">Bangorinas</a> family. All rights reserved.
      </footer>

      <div class="modal fade" id="deleteConfirmModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content bg-dark text-light">
        <div class="modal-header border-secondary">
          <h5 class="modal-title">Confirm Deletion</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <p>Are you sure you want to delete this chat session? This action cannot be undone.</p>
          <p class="text-warning small" id="chatTitleToDelete"></p>
        </div>
        <div class="modal-footer border-secondary">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
        </div>
      </div>
    </div>
  </div>

    
  <!-- Sidebar Toggle & Auth UI Logic -->
   <script>
    // Menu splash logic: show when clicking the menu button
    (function () {
      const logo = document.getElementById('ailogo');
      const overlay = document.getElementById('menu-splash-overlay');
      const closeBtn = document.getElementById('menu-splash-close');
      const openBtn = document.getElementById('menu-splash-open');

      if (!logo || !overlay) return;

      function showInfo() {
        overlay.style.display = 'flex';
        requestAnimationFrame(() => {
          overlay.style.visibility = 'visible';
          overlay.style.opacity = '1';
          overlay.setAttribute('aria-hidden', 'false');
        });
        // trap focus briefly
        const focusable = overlay.querySelector('button') || overlay;
        if (focusable) focusable.focus();
      }

      function hideInfo() {
        overlay.style.opacity = '0';
        overlay.style.visibility = 'hidden';
        overlay.setAttribute('aria-hidden', 'true');
        overlay.addEventListener('transitionend', function onEnd(e) {
          if (e.propertyName === 'opacity') {
            overlay.style.display = 'none';
            overlay.removeEventListener('transitionend', onEnd);
          }
        });
      }

      logo.addEventListener('click', (e) => { e.preventDefault(); showInfo(); });
      if (closeBtn) closeBtn.addEventListener('click', hideInfo);
      if (openBtn) openBtn.addEventListener('click', () => {
        hideInfo();
        // focus main section to help keyboard users
        const main = document.getElementById('main-section');
        if (main) main.focus();
      });

      // Close on Esc or click outside dialog
      overlay.addEventListener('click', (ev) => {
        if (ev.target === overlay) hideInfo();
      });
      document.addEventListener('keydown', (ev) => {
        if (ev.key === 'Escape' && overlay.style.display === 'flex') hideInfo();
      });
    })();
  </script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
    
    function signIn() {
      if (typeof firebase !== 'undefined') {
        const provider = new firebase.auth.GoogleAuthProvider();
        firebase.auth().signInWithPopup(provider);
      }
    }

    function signOut() {
      firebase.auth().signOut();
    }

    firebase.auth().onAuthStateChanged((user) => {
      const dropdown = document.getElementById('userDropdown');
      const signin = document.getElementById('signinOption');
      const signout = document.getElementById('signoutOption');
      const info = document.getElementById('userInfo');

      if (user) {
        signin.classList.add('d-none');
        signout.classList.remove('d-none');
        info.classList.remove('d-none');
        info.innerHTML = `<strong>${user.displayName}</strong><br><small>${user.email}</small>`;
      } else {
        signin.classList.remove('d-none');
        signout.classList.add('d-none');
        info.classList.add('d-none');
        setTimeout(() => {
          document.getElementById('authNotice').style.display = 'block';
        }, 1500);
      }
    });
  </script>
  <script>
    (function () {
      const OVERLAY_ID = 'welcome-splash-overlay';
      const KEY = 'fermata_welcome_hidden';
      const overlay = document.getElementById(OVERLAY_ID);
      const welcomeScreen = document.getElementById('welcome-screen');
      const microScreen = document.getElementById('micro-screen');
      const paypalScreen = document.getElementById('paypal-screen');
      const contactScreen = document.getElementById('contact-screen');
      const paperScreen = document.getElementById('paper-screen');
      const bangorinasLogo = document.getElementById('welcome-logo');

      const bangorBtn = document.getElementById('AI-online');
      const offlineBtn = document.getElementById('AI-offline');
      const microBtn = document.getElementById('btn-micro');
      const ae1Btn = document.getElementById('ae1-btn');
      const ae2Btn = document.getElementById('ae2-btn');
      const microCloseBtn = document.getElementById('micro-close');
      const donateBtn = document.getElementById('donate-btn');
      const paypalBackBtn = document.getElementById('paypal-back');
      const mainMenuBtn = document.getElementById('main-menu');
      const contactBtn = document.getElementById('contact');
      const contactBack = document.getElementById('contact-close');
      const linkedinBtn = document.getElementById('linkedin');
      const instagramBtn = document.getElementById('instagram'); 
      const emailBtn = document.getElementById('email');
      const whatsappBtn = document.getElementById('whatsapp');
      const telegramBtn = document.getElementById('telegram');
      const arcadeScreen = document.getElementById('arcade-screen');
      const arcadeBtn = document.getElementById('play');
      const arcadeCloseBtn = document.getElementById('arcade-close');
      const paperBtn = document.getElementById('btn-paper');
      const paper1Btn = document.getElementById('paper1-btn');
      const paper2Btn = document.getElementById('paper2-btn');
      const paperCloseBtn = document.getElementById('paper-close');


      function showOverlay() {
        if (!overlay) return;
        overlay.style.display = 'flex';
        showWelcome();
      }

      function hideOverlay() {
        if (!overlay) return;
        overlay.style.display = 'none';
      }

      function showWelcome() {
        if (!welcomeScreen) return;
        welcomeScreen.style.display = '';
        bangorinasLogo.style.display = '';
        microScreen.style.display = 'none';
        paypalScreen.style.display = 'none';
        contactScreen.style.display = 'none';
        arcadeScreen.style.display = 'none';
        paperScreen.style.display = 'none';
      }

      function showMicro() {
        if (!welcomeScreen) return;
        welcomeScreen.style.display = 'none';
        bangorinasLogo.style.display = '';
        microScreen.style.display = '';
        paypalScreen.style.display = 'none';
        contactScreen.style.display = 'none';
        arcadeScreen.style.display = 'none';
        paperScreen.style.display = 'none';
      }
      function showPaypal() {
        if (!paypalScreen) return;
        paypalScreen.style.display = '';
        microScreen.style.display = 'none';
        welcomeScreen.style.display = 'none';
        contactScreen.style.display = 'none';
        arcadeScreen.style.display = 'none';
        paperScreen.style.display = 'none';
        bangorinasLogo.style.display = 'none';
      }
      function showContact() {
        if (!contactScreen) return;
        contactScreen.style.display = '';
        microScreen.style.display = 'none';
        welcomeScreen.style.display = 'none';
        paypalScreen.style.display = 'none';
        arcadeScreen.style.display = 'none';
        paperScreen.style.display = 'none';
        bangorinasLogo.style.display = 'none';
      }
      function showArcade() {
        if (!arcadeScreen) return;
        arcadeScreen.style.display = '';
        bangorinasLogo.style.display = '';
        contactScreen.style.display = 'none';
        microScreen.style.display = 'none';
        welcomeScreen.style.display = 'none';
        paypalScreen.style.display = 'none';
        paperScreen.style.display = 'none';
      }
      function showPaper() {
        if (!paperScreen) return;
        bangorinasLogo.style.display = '';
        paperScreen.style.display = '';
        microScreen.style.display = 'none';
        welcomeScreen.style.display = 'none';
        paypalScreen.style.display = 'none';
        contactScreen.style.display = 'none';
        arcadeScreen.style.display = 'none';
      }

      document.addEventListener('DOMContentLoaded', function () {
        if (!localStorage.getItem(KEY)) {
          setTimeout(showOverlay, 300);
        }
      });

      // Left button: enter main site (close splash)
      if (bangorBtn) bangorBtn.addEventListener('click', function () {
        hideOverlay();
      });

      if (offlineBtn) offlineBtn.addEventListener('click', function () {
        window.location.href = './OnDevice';
      });

      // Right button: switch to Micro-Defense splash
      if (microBtn) microBtn.addEventListener('click', function () {
        showMicro();
      });

      if (ae1Btn) ae1Btn.addEventListener('click', function () {
        window.open('https://angel-eye.onrender.com', '_blank', 'noopener');
      });

      if (ae2Btn) {
        ae2Btn.addEventListener('click', function (e) {
          e.preventDefault(); // no-op (coming soon)
        });
      }

      if (microCloseBtn) microCloseBtn.addEventListener('click', function () {
        showWelcome();
      });

      if (donateBtn) {
        donateBtn.addEventListener('click', function () {
          showPaypal();
        });
      }
      if (paypalBackBtn) {
        paypalBackBtn.addEventListener('click', function () {
          showWelcome();
        });
      }

      if (mainMenuBtn) {
        mainMenuBtn.addEventListener('click', function () {
          showOverlay();
        });
      }

      if (contactBtn) {
        contact.addEventListener('click', function () {
          showContact();
        });
      }

      if (contactBack) {
        contactBack.addEventListener('click', function () {
          showWelcome();
        });
      }

      if (linkedinBtn) {
        linkedinBtn.addEventListener('click', function () {
          window.open('https://www.linkedin.com/in/ranggafermata/', '_blank', 'noopener');
        });
      }

      if (instagramBtn) {
        instagramBtn.addEventListener('click', function () {
          window.open('https://www.instagram.com/ranggafermata/', '_blank', 'noopener');
        });
      }

      if (emailBtn) {
        emailBtn.addEventListener('click', function () {
          window.open('mailto:ranggafermata8@gmail.com', '_blank', 'noopener');
        });
      }

      if (whatsappBtn) {
        whatsappBtn.addEventListener('click', function () {
          window.open('https://wa.me/6281318664166', '_blank', 'noopener');
        });
      }

      if (telegramBtn) {
        telegramBtn.addEventListener('click', function () {
          window.open('https://t.me/ranggafermata', '_blank', 'noopener');
        });
      }

      if (arcadeCloseBtn) {
        arcadeCloseBtn.addEventListener('click', function () {
          showWelcome();
        });
      }

      if (arcadeBtn) {
        arcadeBtn.addEventListener('click', function () {
          showArcade();
        });
      }

      if (paperBtn) {
        paperBtn.addEventListener('click', function () {
          showPaper();
        });
      }

      if (paper1Btn) {
        paper1Btn.addEventListener('click', function () {
          window.open('https://docs.google.com/document/d/e/2PACX-1vTV_ocZ9i3hKAY5emfKDCF3-E3U5R6_oY27GGAUrxVimerv7CAEchGhLDRBqqjM8Nm0Xmd0FVUajyKx/pub', '_blank', 'noopener');
        });
      }

      if (paper2Btn) {
        paper2Btn.addEventListener('click', function () {
          window.open('https://docs.google.com/document/d/e/2PACX-1vSchTW_qbltOZ7sAzL5wdEDsbBM5P-s8NjcdU7vn2PPx4vrxqdfxmQWfzTCa7JtrHUz9jynelQ0uzaL/pub', '_blank', 'noopener');
        });
      }

      if (paperCloseBtn) {
        paperCloseBtn.addEventListener('click', function () {
          showWelcome();
        });
      }

    })();
  </script>

</body>
</html>

